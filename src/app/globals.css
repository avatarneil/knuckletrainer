@import "tailwindcss";

/* Theme system - CSS variables are set dynamically by ThemeContext */
/* Default theme values (for SSR and initial load) */
:root {
  /* Core palette - warm, mystical tones (Default theme) */
  --background: 30 20% 6%;
  --foreground: 40 30% 95%;

  /* Card/surface colors */
  --card: 30 20% 10%;
  --card-foreground: 40 30% 95%;

  /* Muted elements */
  --muted: 30 15% 18%;
  --muted-foreground: 40 15% 65%;

  /* Accent - warm gold/amber */
  --accent: 38 90% 55%;
  --accent-foreground: 30 20% 6%;

  /* Primary - crimson/blood red */
  --primary: 0 75% 55%;
  --primary-foreground: 40 30% 98%;

  /* Secondary - mystical purple */
  --secondary: 280 50% 40%;
  --secondary-foreground: 40 30% 95%;

  /* Destructive */
  --destructive: 0 85% 60%;
  --destructive-foreground: 40 30% 98%;

  /* Border and input */
  --border: 30 20% 20%;
  --input: 30 20% 15%;
  --ring: 38 90% 55%;

  /* Radius */
  --radius: 0.75rem;

  /* Dice colors */
  --dice-1: 0 70% 50%;
  --dice-2: 30 80% 50%;
  --dice-3: 50 85% 50%;
  --dice-4: 120 60% 40%;
  --dice-5: 200 70% 50%;
  --dice-6: 280 60% 50%;
}

@theme inline {
  /* Custom breakpoint for narrow viewports */
  --breakpoint-xs: 480px;

  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));
  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));
  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));
  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));
  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));
  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));
  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));
  --color-border: hsl(var(--border));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--ring));
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);

  /* Dice value colors */
  --color-dice-1: hsl(var(--dice-1));
  --color-dice-2: hsl(var(--dice-2));
  --color-dice-3: hsl(var(--dice-3));
  --color-dice-4: hsl(var(--dice-4));
  --color-dice-5: hsl(var(--dice-5));
  --color-dice-6: hsl(var(--dice-6));

  --font-sans: "Inter", system-ui, sans-serif;
  --font-mono: "JetBrains Mono", monospace;
}

* {
  border-color: hsl(var(--border));
}

html {
  /* Ensure html fills viewport for Safari */
  height: 100%;
  height: -webkit-fill-available;
}

body {
  background: hsl(var(--background));
  color: hsl(var(--foreground));
  font-family: var(--font-sans);
  min-height: 100dvh;
  min-height: -webkit-fill-available;
  /* Prevent overscroll bounce on iOS */
  overscroll-behavior: none;
  -webkit-overflow-scrolling: touch;
}

/* Background pattern - subtle ritual circles */
body::before {
  content: "";
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-image:
    radial-gradient(circle at 20% 30%, hsl(var(--primary) / 0.03) 0%, transparent 40%),
    radial-gradient(circle at 80% 70%, hsl(var(--secondary) / 0.03) 0%, transparent 40%),
    radial-gradient(circle at 50% 50%, hsl(var(--accent) / 0.02) 0%, transparent 60%);
  pointer-events: none;
  z-index: -1;
}

/* Dice animation keyframes */
@keyframes dice-roll {
  0% {
    transform: rotateX(0deg) rotateY(0deg);
  }
  25% {
    transform: rotateX(90deg) rotateY(45deg);
  }
  50% {
    transform: rotateX(180deg) rotateY(90deg);
  }
  75% {
    transform: rotateX(270deg) rotateY(135deg);
  }
  100% {
    transform: rotateX(360deg) rotateY(180deg);
  }
}

@keyframes dice-bounce {
  0%,
  100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-10px);
  }
}

@keyframes fade-in-up {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes pulse-glow {
  0%,
  100% {
    box-shadow: 0 0 5px hsl(var(--accent) / 0.5);
  }
  50% {
    box-shadow: 0 0 20px hsl(var(--accent) / 0.8);
  }
}

@keyframes shake {
  0%,
  100% {
    transform: translateX(0);
  }
  25% {
    transform: translateX(-5px) rotate(-2deg);
  }
  75% {
    transform: translateX(5px) rotate(2deg);
  }
}

.animate-dice-roll {
  animation: dice-roll 0.5s ease-out;
}

.animate-dice-bounce {
  animation: dice-bounce 0.3s ease-out;
}

.animate-fade-in-up {
  animation: fade-in-up 0.3s ease-out forwards;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-shake {
  animation: shake 0.3s ease-in-out;
}

/* Glow effect for interactive elements */
.glow-on-hover:hover {
  box-shadow: 0 0 15px hsl(var(--accent) / 0.4);
}

/* Mobile landscape layout support */
/* Apply horizontal layout when in landscape orientation with sufficient width */
@media (orientation: landscape) and (min-width: 480px) and (max-width: 1023px) {
  /* Center layout (default) */
  .landscape-horizontal {
    flex-direction: row !important;
    gap: 0.5rem !important;
  }

  .landscape-show {
    display: flex !important;
  }

  .landscape-hide {
    display: none !important;
  }

  /* Compact sizing for landscape mobile */
  .landscape-compact-center {
    flex-shrink: 0;
  }

  .landscape-grid-container {
    flex: 1;
    min-width: 0; /* Allow shrinking */
  }

  .landscape-grid-left {
    justify-content: flex-end;
  }

  .landscape-grid-right {
    justify-content: flex-start;
  }

  /* Right layout - dice on far right */
  .landscape-horizontal-right {
    flex-direction: row !important;
    gap: 0.25rem !important;
    justify-content: space-between !important;
  }

  .landscape-right-show {
    display: flex !important;
  }

  .landscape-right-hide {
    display: none !important;
  }

  .landscape-right-center {
    flex-shrink: 0;
    order: 0;
  }

  /* Hide dice in center section when using right layout */
  .landscape-right-dice-hide {
    display: none !important;
  }

  /* Show dice on the right side */
  .landscape-right-dice-show {
    display: flex !important;
    order: 10;
    flex-shrink: 0;
  }
}

/* Safe area utility class for main containers */
.safe-area-inset {
  padding-top: env(safe-area-inset-top, 0);
  padding-bottom: env(safe-area-inset-bottom, 0);
  padding-left: env(safe-area-inset-left, 0);
  padding-right: env(safe-area-inset-right, 0);
}

/* Safe area padding with minimum padding for game pages */
.safe-area-padding {
  --safe-top: env(safe-area-inset-top, 0px);
  --safe-bottom: env(safe-area-inset-bottom, 0px);
  --safe-left: env(safe-area-inset-left, 0px);
  --safe-right: env(safe-area-inset-right, 0px);
  
  padding-top: calc(0.5rem + var(--safe-top));
  padding-bottom: calc(0.25rem + var(--safe-bottom));
  padding-left: calc(0.5rem + var(--safe-left));
  padding-right: calc(0.5rem + var(--safe-right));
}

/* Ensure content doesn't overflow on mobile */
@supports (padding: max(0px)) {
  .safe-area-padding {
    padding-top: max(0.5rem, calc(env(safe-area-inset-top, 0px) + 0.25rem));
    padding-bottom: max(0.25rem, env(safe-area-inset-bottom, 0px));
    padding-left: max(0.5rem, env(safe-area-inset-left, 0px));
    padding-right: max(0.5rem, env(safe-area-inset-right, 0px));
  }
}
